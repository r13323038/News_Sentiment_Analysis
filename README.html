<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}


/* è®“åœ–ç‰‡ä¸è¶…éé é¢å¯¬åº¦ï¼Œä¸¦ä¿æŒæ¯”ä¾‹ */
img {
    max-width: 100%;
    height: auto;
    display: block; 
    margin: 0 auto; /* åœ–ç‰‡ç½®ä¸­ */
}
/* é¿å…è¡¨æ ¼è¢«åˆ‡æ–· */
table {
    page-break-inside: avoid;
}
/* é¿å…æ¨™é¡Œè·Ÿå…§æ–‡åˆ†å®¶ */
h1, h2, h3, h4, h5 {
    page-break-after: avoid;
}


/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="financial-news-sentiment-analysis--stock-correlation">Financial News Sentiment Analysis &amp; Stock Correlation</h1>
<h2 id="%F0%9F%93%96-%E5%B0%88%E6%A1%88%E7%B0%A1%E4%BB%8B-project-overview">ğŸ“– å°ˆæ¡ˆç°¡ä»‹ (Project Overview)</h2>
<p>æœ¬å°ˆæ¡ˆæ—¨åœ¨åˆ©ç”¨è‡ªç„¶èªè¨€è™•ç† (NLP) æŠ€è¡“åˆ†æè²¡ç¶“æ–°èçš„æƒ…ç·’ï¼Œä¸¦æ¢è¨è©²æƒ…ç·’æŒ‡æ¨™èˆ‡ç¾è‚¡ä¸»è¦æŒ‡æ•¸ï¼ˆS&amp;P 500, NASDAQ, Dow Jones, Russell 2000ï¼‰ä¹‹é–“çš„ç›¸é—œæ€§ã€‚</p>
<h2 id="%F0%9F%92%BE-%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90-data-source">ğŸ’¾ è³‡æ–™ä¾†æº (Data Source)</h2>
<p>æœ¬å°ˆæ¡ˆä½¿ç”¨å…©é¡ä¸åŒçš„è³‡æ–™ä¾†æºï¼š</p>
<h3 id="1-%E6%A8%A1%E5%9E%8B%E8%A8%93%E7%B7%B4%E8%B3%87%E6%96%99-model-fine-tuning-data">1. æ¨¡å‹è¨“ç·´è³‡æ–™ (Model Fine-Tuning Data)</h3>
<ul>
<li><strong>ä¾†æº</strong>: <a href="https://www.kaggle.com/datasets/ankurzing/sentiment-analysis-for-financial-news?select=all-data.csv">Kaggle - Sentiment Analysis for Financial News</a></li>
<li><strong>æè¿°</strong>: ä½¿ç”¨è©²è³‡æ–™é›†ä¸­çš„ 4,846 ç­†å¸¶æœ‰æƒ…ç·’æ¨™ç±¤ï¼ˆPositive, Neutral, Negativeï¼‰çš„è²¡ç¶“æ–°èæ¨™é¡Œï¼Œå° BERT æ¨¡å‹é€²è¡Œå¾®èª¿ (Fine-tuning)ï¼Œä½¿å…¶å…·å‚™åˆ¤è®€è²¡ç¶“æ–‡æœ¬æƒ…ç·’çš„èƒ½åŠ›ã€‚</li>
</ul>
<h3 id="2-%E5%B8%82%E5%A0%B4%E5%88%86%E6%9E%90%E8%B3%87%E6%96%99-market-analysis-data">2. å¸‚å ´åˆ†æè³‡æ–™ (Market Analysis Data)</h3>
<p>æœ¬å°ˆæ¡ˆé‡å°<strong>éå» 30 å¤©</strong>çš„å¸‚å ´å‹•æ…‹é€²è¡Œåˆ†æï¼Œæ•¸æ“šç²å–åˆ†ç‚ºæ–‡æœ¬èˆ‡æ•¸å€¼å…©æ¢è·¯å¾‘ï¼š</p>
<ul>
<li>
<p><strong>æ–°èæ–‡æœ¬ (News Text Data)</strong></p>
<ul>
<li><strong>ä¾†æº</strong>: Google News (é€éçˆ¬èŸ²æŠ€è¡“ç²å–)</li>
<li><strong>ç¯„åœ</strong>: éå» 30 å¤©</li>
<li><strong>ç”¨é€”</strong>: ç²å–æ¨™é¡Œèˆ‡æ‘˜è¦ï¼Œè¼¸å…¥å¾®èª¿å¾Œçš„ BERT æ¨¡å‹ä»¥è¨ˆç®—æ¯æ—¥æƒ…ç·’åˆ†æ•¸ (Sentiment Score)ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¸‚å ´æ•¸å€¼ (Stock Market Data)</strong></p>
<ul>
<li><strong>ä¾†æº</strong>: Yahoo Finance (é€é <code>yfinance</code> API)</li>
<li><strong>ç¯„åœ</strong>: éå» 30 å¤©</li>
<li><strong>ç”¨é€”</strong>: ç²å–ç›®æ¨™æŒ‡æ•¸çš„æ¯æ—¥æ”¶ç›¤åƒ¹ (Close Price) èˆ‡æˆäº¤é‡ï¼Œç”¨æ–¼èˆ‡æƒ…ç·’æŒ‡æ¨™é€²è¡Œæ™‚é–“åºåˆ—å°é½Šèˆ‡ç›¸é—œæ€§åˆ†æã€‚</li>
</ul>
</li>
</ul>
<h2 id="%F0%9F%9B%A0%EF%B8%8F-%E6%8A%80%E8%A1%93%E6%A3%A7-tech-stack">ğŸ› ï¸ æŠ€è¡“æ£§ (Tech Stack)</h2>
<ul>
<li><strong>èªè¨€</strong>: Python 3.x</li>
<li><strong>æ•¸æ“šè™•ç†</strong>: Pandas, NumPy</li>
<li><strong>çµ±è¨ˆåˆ†æ</strong>: Statsmodels (Dynamic Logit, Hypothesis Testing)</li>
<li><strong>NLP æ¡†æ¶</strong>: Hugging Face Transformers, PyTorch</li>
<li><strong>NLP æ¨¡å‹</strong>: FinBERT (Financial Bidirectional Encoder Representations from Transformers)</li>
<li><strong>è¦–è¦ºåŒ–</strong>: Matplotlib, Seaborn</li>
<li><strong>è³‡æ–™ä¾†æº</strong>: Yahoo Finance (<code>yfinance</code>), Google News (<code>GoogleNews</code>), Kaggle Dataset</li>
</ul>
<div style="page-break-after: always;"></div>
<h2 id="%E5%B0%88%E6%A1%88%E7%B5%90%E6%A7%8B-project-structure">å°ˆæ¡ˆçµæ§‹ (Project Structure)</h2>
<p>æœ¬å°ˆæ¡ˆä¾ç…§æ•¸æ“šè™•ç†æµç¨‹åˆ†ç‚ºå››å€‹ä¸»è¦æ­¥é©Ÿï¼š</p>
<ol>
<li><strong>01_scraper.ipynb</strong>:
<ul>
<li>è² è²¬å¾è²¡ç¶“æ–°èç¶²ç«™çˆ¬å–æ¨™é¡Œèˆ‡å…§æ–‡ã€‚</li>
<li>è³‡æ–™æ¸…æ´—èˆ‡åˆæ­¥æ ¼å¼åŒ–ã€‚</li>
</ul>
</li>
<li><strong>02_bert_training.ipynb</strong>:
<ul>
<li>è¼‰å…¥é è¨“ç·´ BERT æ¨¡å‹ã€‚</li>
<li>é‡å°è²¡ç¶“æ–‡æœ¬é€²è¡Œå¾®èª¿ (Fine-tuning)ã€‚</li>
</ul>
</li>
<li><strong>03_inference.ipynb</strong>:
<ul>
<li>å°‡çˆ¬å–çš„æ–°èè³‡æ–™è¼¸å…¥æ¨¡å‹ï¼Œè¨ˆç®—æƒ…ç·’åˆ†æ•¸ (Sentiment Score)ã€‚</li>
</ul>
</li>
<li><strong>04_analysis.ipynb</strong>:
<ul>
<li>æ•´åˆæƒ…ç·’åˆ†æ•¸èˆ‡è‚¡åƒ¹æ•¸æ“šã€‚</li>
<li>é€²è¡Œæ™‚é–“åºåˆ—åˆ†æèˆ‡ç›¸é—œæ€§æª¢å®šã€‚</li>
<li>ç”¢å‡ºè¦–è¦ºåŒ–åœ–è¡¨ã€‚</li>
</ul>
</li>
</ol>

<div style="page-break-after: always;"></div>


<h2 id="%E6%83%85%E7%B7%92%E6%8C%87%E6%A8%99%E5%BB%BA%E6%A7%8B-sentiment-index-construction">æƒ…ç·’æŒ‡æ¨™å»ºæ§‹ (Sentiment Index Construction)</h2>
<p>ç‚ºäº†ç¢ºä¿åˆ†æçš„ç©©å¥æ€§ (Robustness)ï¼Œæœ¬å°ˆæ¡ˆæ¡ç”¨å…©ç¨®ä¸åŒçš„æ¨¡å¼å°‡æ–°èæ–‡æœ¬è½‰åŒ–ç‚ºæ¯æ—¥æƒ…ç·’æŒ‡æ¨™ï¼š</p>
<h3 id="%E6%A8%A1%E5%BC%8F%E4%B8%80%E5%9F%BA%E6%96%BC%E9%9B%A2%E6%95%A3%E6%A8%99%E7%B1%A4-discrete-classification">æ¨¡å¼ä¸€ï¼šåŸºæ–¼é›¢æ•£æ¨™ç±¤ (Discrete Classification)</h3>
<ul>
<li><strong>æ–¹æ³•</strong>: å°‡æ¯ä¸€å‰‡æ–°èæ¨™é¡Œå¼·åˆ¶åˆ†é¡ç‚º <strong>Positive (æ­£é¢)</strong>ã€<strong>Negative (è² é¢)</strong> æˆ– <strong>Neutral (ä¸­ç«‹)</strong> ä¸‰é¡ã€‚</li>
<li><strong>æ¯æ—¥èšåˆ (Aggregation)</strong>: æ¡ç”¨ <strong>Bullish Ratio (çœ‹æ¼²æ¯”ç‡)</strong> è¨ˆç®—ç•¶æ—¥å¸‚å ´æƒ…ç·’ï¼Œå¿½ç•¥ä¸­ç«‹æ–°èçš„å½±éŸ¿ã€‚</li>
<li><strong>å…¬å¼</strong>:
$$B_t = \frac{N_{pos}}{N_{pos} + N_{neg}}$$
<ul>
<li>å…¶ä¸­ $N_{pos}$ ç‚ºç•¶æ—¥æ­£é¢æ–°èæ•¸ï¼Œ$N_{neg}$ ç‚ºç•¶æ—¥è² é¢æ–°èæ•¸ã€‚</li>
</ul>
</li>
</ul>
<h3 id="%E6%A8%A1%E5%BC%8F%E4%BA%8C%E5%9F%BA%E6%96%BC%E6%A9%9F%E7%8E%87%E5%88%86%E6%95%B8-continuous-probability-score">æ¨¡å¼äºŒï¼šåŸºæ–¼æ©Ÿç‡åˆ†æ•¸ (Continuous Probability Score)</h3>
<ul>
<li><strong>æ–¹æ³•</strong>: åˆ©ç”¨ FinBERT è¼¸å‡ºçš„ Logits ç¶“é <strong>Softmax</strong> å‡½æ•¸è½‰åŒ–ç‚ºæ©Ÿç‡åˆ†ä½ˆï¼Œä¿ç•™æ¨¡å‹å°æƒ…ç·’åˆ¤æ–·çš„ã€Œä¿¡å¿ƒç¨‹åº¦ã€ã€‚</li>
<li><strong>åˆ†æ•¸è½‰æ›</strong>: å°‡æ©Ÿç‡æ˜ å°„è‡³ $[-1, 1]$ å€é–“ï¼ˆ1 ä»£è¡¨æ¥µåº¦æ­£é¢ï¼Œ-1 ä»£è¡¨æ¥µåº¦è² é¢ï¼‰ã€‚
$$Score_i = P(Positive)_i - P(Negative)_i$$</li>
<li><strong>æ¯æ—¥èšåˆ</strong>: è¨ˆç®—ç•¶æ—¥æ‰€æœ‰æ–°èåˆ†æ•¸çš„<strong>ç®—è¡“å¹³å‡æ•¸ (Mean)</strong>ã€‚
$$S_t = \frac{1}{n} \sum_{i=1}^{n} Score_i$$</li>
</ul>
<h3 id="%E6%8C%87%E6%A8%99%E4%B8%80%E8%87%B4%E6%80%A7%E8%88%87%E7%A9%A9%E5%81%A5%E6%80%A7%E6%AA%A2%E5%AE%9A-consistency--robustness-check">æŒ‡æ¨™ä¸€è‡´æ€§èˆ‡ç©©å¥æ€§æª¢å®š (Consistency &amp; Robustness Check)</h3>
<p>ç‚ºäº†ç¢ºèªä¸Šè¿°å…©ç¨®æƒ…ç·’æŒ‡æ¨™å»ºæ§‹æ–¹å¼æ˜¯å¦æ•æ‰åˆ°ç›¸åŒçš„å¸‚å ´è¨Šè™Ÿï¼Œæœ¬å°ˆæ¡ˆå°ã€Œæ¨¡å¼ä¸€ (Bullish Ratio)ã€èˆ‡ã€Œæ¨¡å¼äºŒ (Sentiment Score)ã€é€²è¡Œäº†å›æ­¸åˆ†æèˆ‡ç›¸é—œæ€§æª¢å®šã€‚</p>
<p><img src="notebooks/plots/sentiment_correlation_check.png" alt="Sentiment Indices Correlation"></p>
<ul>
<li><strong>æª¢å®šæ–¹æ³•</strong>: å°å…©ç¨®æŒ‡æ¨™é€²è¡Œç·šæ€§å›æ­¸ (Linear Regression) åˆ†æã€‚
$$Index_{Mode2} = \alpha + \beta \cdot Index_{Mode1} + \epsilon$$</li>
<li><strong>çµæœ</strong>:
<ul>
<li>å…©è€…å‘ˆç¾<strong>é«˜åº¦æ­£ç›¸é—œ (High Positive Correlation)</strong>ã€‚</li>
<li>å›æ­¸åœ–é¡¯ç¤ºæ•¸æ“šé»ç·Šå¯†åˆ†å¸ƒæ–¼è¶¨å‹¢ç·šå‘¨åœï¼Œè¡¨æ˜å…©ç¨®è¨ˆç®—æ–¹æ³•é›–ç„¶æ•¸å­¸å®šç¾©ä¸åŒï¼Œä½†åœ¨æ•æ‰å¸‚å ´æƒ…ç·’æ³¢å‹•ä¸Šå…·æœ‰é«˜åº¦çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
</li>
<li><strong>çµè«–</strong>:
ç”±æ–¼å…©è€…åœ¨çµ±è¨ˆç‰¹æ€§ä¸Šé«˜åº¦é‡ç–Šï¼Œæœ¬å°ˆæ¡ˆåœ¨å¾ŒçºŒçš„ Dynamic Logit æ¨¡å‹åˆ†æä¸­ï¼Œå¯è¦–ç‚º<strong>çµæœå…·æœ‰ç©©å¥æ€§</strong>ï¼Œé¸æ“‡ä»»ä¸€æŒ‡æ¨™å‡ä¸å½±éŸ¿ä¸»è¦çµè«–ã€‚</li>
</ul>
<div style="page-break-after: always;"></div>
<h2 id="%F0%9F%93%8A-%E5%88%86%E6%9E%90%E7%B5%90%E6%9E%9C-key-results">ğŸ“Š åˆ†æçµæœ (Key Results)</h2>
<h3 id="1-%E7%9B%B8%E9%97%9C%E6%80%A7%E7%86%B1%E5%8A%9B%E5%9C%96-correlation-heatmap">1. ç›¸é—œæ€§ç†±åŠ›åœ– (Correlation Heatmap)</h3>
<p>è§€å¯Ÿæƒ…ç·’æŒ‡æ¨™èˆ‡å„å¤§æŒ‡æ•¸è®Šå‹•ç‡ä¹‹é–“çš„ç›¸é—œä¿‚æ•¸ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">S&amp;P 500 (SPY)</th>
<th style="text-align:center">NASDAQ-100 (QQQ)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="notebooks/plots/heatmap_S&amp;P_500_SPY.png" alt="SPY"></td>
<td style="text-align:center"><img src="notebooks/plots/heatmap_NASDAQ-100_QQQ.png" alt="QQQ"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">Dow Jones (DIA)</th>
<th style="text-align:center">Small Cap (IWM)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="notebooks/plots/heatmap_Dow_Jones_DIA.png" alt="DIA"></td>
<td style="text-align:center"><img src="notebooks/plots/heatmap_Small_Cap_IWM.png" alt="IWM"></td>
</tr>
</tbody>
</table>
<h3 id="2-%E6%AF%8F%E6%97%A5%E6%83%85%E7%B7%92%E8%88%87%E8%82%A1%E5%83%B9%E8%B5%B0%E5%8B%A2-daily-trends">2. æ¯æ—¥æƒ…ç·’èˆ‡è‚¡åƒ¹èµ°å‹¢ (Daily Trends)</h3>
<table>
<thead>
<tr>
<th style="text-align:center">S&amp;P 500 (SPY)</th>
<th style="text-align:center">NASDAQ-100 (QQQ)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="notebooks/plots/daily_result_S&amp;P_500_SPY.png" alt="SPY"></td>
<td style="text-align:center"><img src="notebooks/plots/daily_result_NASDAQ-100_QQQ.png" alt="QQQ"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">Dow Jones (DIA)</th>
<th style="text-align:center">Small Cap (IWM)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="notebooks/plots/daily_result_Dow_Jones_DIA.png" alt="DIA"></td>
<td style="text-align:center"><img src="notebooks/plots/daily_result_Small_Cap_IWM.png" alt="IWM"></td>
</tr>
</tbody>
</table>
<h3 id="3-%E7%B5%B1%E8%A8%88%E6%AA%A2%E5%AE%9A%E8%88%87%E6%A8%A1%E5%9E%8B%E9%A9%97%E8%AD%89-statistical-verification">3. çµ±è¨ˆæª¢å®šèˆ‡æ¨¡å‹é©—è­‰ (Statistical Verification)</h3>
<p>ç‚ºäº†æ›´åš´è¬¹åœ°é©—è­‰æƒ…ç·’æŒ‡æ¨™å°å¸‚å ´èµ°å‹¢çš„é æ¸¬èƒ½åŠ› (Predictive Power)ï¼Œè€Œä¸åƒ…åƒ…æ˜¯è§€å¯Ÿç›¸é—œæ€§ï¼Œæœ¬å°ˆæ¡ˆæ¡ç”¨ <strong>Dynamic Logit Model</strong> é€²è¡Œæ™‚é–“åºåˆ—å›æ­¸æª¢å®šã€‚</p>
<h4 id="%E7%82%BA%E4%BB%80%E9%BA%BC%E9%81%B8%E6%93%87%E6%AD%A4%E6%A8%A1%E5%9E%8B-motivation">ç‚ºä»€éº¼é¸æ“‡æ­¤æ¨¡å‹ï¼Ÿ (Motivation)</h4>
<ul>
<li><strong>äºŒå…ƒçµæœ (Binary Outcome)</strong>ï¼šé‡‘èå¸‚å ´å……æ»¿é›œè¨Šï¼Œç›´æ¥é æ¸¬è‚¡åƒ¹æ•¸å€¼ (Continuous Variable) é›£åº¦æ¥µé«˜ä¸”èª¤å·®å¤§ã€‚å› æ­¤ï¼Œæœ¬ç ”ç©¶å°‡å•é¡Œç°¡åŒ–ç‚ºé æ¸¬å¸‚å ´ã€Œæ–¹å‘ã€ï¼š<strong>ä¸Šæ¼² (1)</strong> æˆ– <strong>ä¸‹è·Œ (0)</strong>ã€‚</li>
</ul>
<h4 id="a-%E6%A8%A1%E5%9E%8B%E8%A8%AD%E5%AE%9A-model-specification">A. æ¨¡å‹è¨­å®š (Model Specification)</h4>
<ol>
<li>
<p><strong>åŸºæº–æ¨¡å‹ (Naive Baseline)</strong>:</p>
<ul>
<li><strong>å®šç¾©</strong>: å‡è¨­æŠ•è³‡äººåƒ…çŸ¥æ›‰å¸‚å ´çš„æ­·å²ä¸Šæ¼²æ©Ÿç‡ï¼Œä¸¦æ¡å–ã€Œå§‹çµ‚çŒœæ¸¬æ©Ÿç‡è¼ƒé«˜è€… (Always Predict Majority Class)ã€çš„ç­–ç•¥ã€‚</li>
<li><strong>è¨ˆç®—æ–¹å¼</strong>: Accuracy = $\max(P(Up), P(Down))$</li>
<li><strong>ç›®çš„</strong>: ä½œç‚ºæ¨¡å‹æ€§èƒ½çš„ä¸‹é™ (Lower Bound)ï¼Œé©—è­‰æ¨¡å‹æ˜¯å¦å­¸ç¿’åˆ°æ•¸æ“šä¸­çš„éé¡¯è‘—ç‰¹å¾µã€‚</li>
</ul>
</li>
<li>
<p><strong>æƒ…ç·’å¢å¼·æ¨¡å‹ (Sentiment Augmented Model)</strong>:</p>
<ul>
<li><strong>æ©Ÿåˆ¶</strong>: åœ¨æ§åˆ¶äº†å¸‚å ´è‡ªæˆ‘å›æ­¸ (Autoregressive) çš„æ…£æ€§ç‰¹å¾µå¾Œï¼Œæª¢é©—åŠ å…¥æ˜¨æ—¥æƒ…ç·’æŒ‡æ¨™ $S_{t-1}$ æ˜¯å¦èƒ½é¡¯è‘—æå‡æ¨¡å‹çš„è§£é‡‹åŠ›ã€‚</li>
<li><strong>å…¬å¼</strong>: $\ln(\frac{P_t}{1-P_t}) = \alpha + \gamma Y_{t-1} + \beta S_{t-1}$</li>
</ul>
</li>
</ol>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>$P(Y_t=1)$ï¼šé æ¸¬ç¬¬ $t$ å¤©å¸‚å ´ä¸Šæ¼²çš„æ©Ÿç‡ã€‚</li>
<li>$\text{Sentiment}_{t-1}$ï¼šç¬¬ $t-1$ å¤©ç¶“é BERT æ¨¡å‹è¨ˆç®—å‡ºçš„åŠ æ¬Šæƒ…ç·’åˆ†æ•¸ã€‚</li>
<li>$\beta$ï¼šæˆ‘å€‘æœ€é—œæ³¨çš„ä¿‚æ•¸ï¼Œè‹¥ $\beta$ é¡¯è‘—ç•°æ–¼ 0ï¼Œå³è­‰æ˜æƒ…ç·’æŒ‡æ¨™å…·æœ‰é æ¸¬åŠ›ã€‚</li>
</ul>
<h4 id="b-%E6%AA%A2%E5%AE%9A%E7%B5%90%E6%9E%9C-empirical-results">B. æª¢å®šçµæœ (Empirical Results)</h4>
<p>ç”±æ–¼æ¨£æœ¬æœŸé–“é™åˆ¶ ($N=20$)ï¼Œçµ±è¨ˆæª¢å®šåŠ›å—åˆ°ä¸€å®šå½±éŸ¿ï¼Œä½†åœ¨ç§‘æŠ€è‚¡æ¬Šé‡è¼ƒé«˜çš„ <strong>NASDAQ-100 (QQQ)</strong> èˆ‡å¤§ç›¤ <strong>S&amp;P 500 (SPY)</strong> ä¸­ï¼Œè§€å¯Ÿåˆ°é¡¯è‘—æˆ–é‚Šç·£é¡¯è‘—çš„é æ¸¬æ•ˆæœã€‚</p>
<p><strong>1. ç¶œåˆæ¯”è¼ƒè¡¨ (Summary Statistics)</strong>
ä¸‹è¡¨å±•ç¤ºäº†å››å€‹ä¸»è¦æŒ‡æ•¸åœ¨å‹•æ…‹ Logit æ¨¡å‹ä¸‹çš„è¡¨ç¾ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">æŒ‡æ•¸ (Ticker)</th>
<th style="text-align:center">æ¨¡å‹æº–ç¢ºç‡ (Accuracy)</th>
<th style="text-align:center">åŸºæº–æº–ç¢ºç‡ (Baseline)</th>
<th style="text-align:center">æå‡å¹…åº¦ (Lift)</th>
<th style="text-align:center">æƒ…ç·’ä¿‚æ•¸ ($\beta$)</th>
<th style="text-align:center">P-value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>NASDAQ-100 (QQQ)</strong></td>
<td style="text-align:center"><strong>65.00%</strong></td>
<td style="text-align:center">55.00%</td>
<td style="text-align:center"><strong>+10%</strong></td>
<td style="text-align:center"><strong>14.61</strong></td>
<td style="text-align:center"><strong>0.091</strong>*</td>
</tr>
<tr>
<td style="text-align:left"><strong>S&amp;P 500 (SPY)</strong></td>
<td style="text-align:center"><strong>65.00%</strong></td>
<td style="text-align:center">60.00%</td>
<td style="text-align:center">+5%</td>
<td style="text-align:center">14.62</td>
<td style="text-align:center">0.107</td>
</tr>
<tr>
<td style="text-align:left">Dow Jones (DIA)</td>
<td style="text-align:center">60.00%</td>
<td style="text-align:center">55.00%</td>
<td style="text-align:center">+5%</td>
<td style="text-align:center">9.06</td>
<td style="text-align:center">0.197</td>
</tr>
<tr>
<td style="text-align:left">Small Cap (IWM)</td>
<td style="text-align:center">60.00%</td>
<td style="text-align:center">60.00%</td>
<td style="text-align:center">0%</td>
<td style="text-align:center">7.99</td>
<td style="text-align:center">0.281</td>
</tr>
</tbody>
</table>
<p><small>*è¨»ï¼šP-value &lt; 0.1 ä»£è¡¨åœ¨ 10% ä¿¡å¿ƒæ°´æº–ä¸‹é¡¯è‘—ã€‚</small></p>
<p><strong>2. é—œéµç™¼ç¾ (Key Findings)</strong></p>
<ul>
<li><strong>æƒ…ç·’é¡¯è‘—æ€§</strong>: åœ¨ NASDAQ-100 æŒ‡æ•¸ä¸­ï¼Œæ˜¨æ—¥æƒ…ç·’æŒ‡æ¨™ (<code>Lag_Avg_Sentiment</code>) çš„ä¿‚æ•¸ç‚º <strong>14.61</strong> ($p=0.091$)ï¼Œé¡¯ç¤ºæƒ…ç·’èˆ‡éš”æ—¥ä¸Šæ¼²æ©Ÿç‡å‘ˆç¾<strong>é¡¯è‘—æ­£ç›¸é—œ</strong>ã€‚</li>
<li><strong>æ¨¡å‹é æ¸¬åŠ›</strong>: åŠ å…¥æƒ…ç·’æŒ‡æ¨™å¾Œï¼ŒQQQ çš„é æ¸¬æº–ç¢ºç‡è¼ƒåŸºæº–æ¨¡å‹æå‡äº† <strong>10 å€‹ç™¾åˆ†é»</strong> (55% $\to$ 65%)ï¼›S&amp;P 500 äº¦æå‡äº† 5 å€‹ç™¾åˆ†é»ã€‚</li>
<li><strong>å¸‚å ´æ…£æ€§</strong>: è®Šæ•¸ <code>Lag_Return</code> åœ¨æ‰€æœ‰æ¨¡å‹ä¸­å‡æœªé”é¡¯è‘—æ°´æº– ($p &gt; 0.3$)ï¼Œé¡¯ç¤ºåœ¨éå» 30 å¤©çš„éœ‡ç›ªè¡Œæƒ…ä¸­ï¼Œå–®ç´”çš„åƒ¹æ ¼æ…£æ€§ (Momentum) ç„¡æ³•æœ‰æ•ˆé æ¸¬æœªä¾†ï¼Œåè€Œçªé¡¯äº†æ–°èæƒ…ç·’ä½œç‚ºé¡å¤–è¨Šè™Ÿçš„åƒ¹å€¼ã€‚</li>
</ul>
<blockquote>
<p><strong>çµè«–è§£è®€</strong>:
ç”±æ–¼æœ¬å°ˆæ¡ˆåˆ†æå€é–“è¼ƒçŸ­ (æ¨£æœ¬æ•¸=20)ï¼ŒP-value å°æ¥µç«¯å€¼è¼ƒç‚ºæ•æ„Ÿã€‚å„˜ç®¡ SPY èˆ‡ QQQ å‘ˆç¾æ­£å‘è¨Šè™Ÿï¼Œä½†å»ºè­°æœªä¾†åœ¨æ›´é•·çš„æ•¸æ“šå€é–“ä¸‹é€²è¡Œé©—è­‰ä»¥ç¢ºèªå…¶é•·æœŸç©©å¥æ€§ã€‚</p>
</blockquote>
<hr>

<div style="page-break-after: always;"></div>

<h2 id="how-to-run">How to Run</h2>
<ol>
<li>
<p><strong>å»ºç«‹ç’°å¢ƒèˆ‡å®‰è£ä¾è³´</strong>:</p>
<pre class="hljs"><code><div>pip install -r requirements.txt
</div></code></pre>
</li>
<li>
<p><strong>åŸ·è¡Œæµç¨‹</strong>:
è«‹ä¾åºåŸ·è¡Œ <code>notebooks/</code> è³‡æ–™å¤¾ä¸­çš„ Jupyter Notebookï¼š</p>
<ul>
<li><strong><code>01_scraper.ipynb</code></strong>: æŠ“å–æœ€æ–°æ•¸æ“š
<blockquote>
<p><strong>Tip</strong>: å¼·çƒˆå»ºè­°åœ¨ <strong>Google Colab</strong> ä¸ŠåŸ·è¡Œæ­¤æ­¥é©Ÿã€‚ç”±æ–¼ Colab æ¯æ¬¡å•Ÿå‹•è™›æ“¬æ©Ÿéƒ½æœƒåˆ†é…æ–°çš„ IP ä½å€ (Dynamic IP Allocation)ï¼Œé€™èƒ½æœ‰æ•ˆé™ä½çˆ¬èŸ²å› é »ç¹è«‹æ±‚è€Œè¢«ç›®æ¨™ç¶²ç«™å°é– (IP Blocking) çš„é¢¨éšªã€‚</p>
</blockquote>
</li>
<li><strong><code>02_bert_training.ipynb</code></strong>: é€²è¡Œæ¨¡å‹è¨“ç·´ (æˆ–ç›´æ¥è¼‰å…¥æ¬Šé‡)</li>
<li><strong><code>03_inference.ipynb</code></strong>: è¨ˆç®—æƒ…ç·’åˆ†æ•¸</li>
<li><strong><code>04_analysis.ipynb</code></strong>: ç”¢å‡ºæœ€çµ‚å ±è¡¨èˆ‡è¦–è¦ºåŒ–</li>
</ul>
</li>
</ol>

</body>
</html>
